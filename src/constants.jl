using StructIO

const INA219_DEFAULT_ADDRESS	= 0x40
const INA219_CONF_REG		= 0x00
const INA219_SHUNT_REG		= 0x01
const INA219_BUS_REG		= 0x02
const INA219_PWR_REG		= 0x03
const INA219_CURRENT_REG	= 0x04
const INA219_CALIBRATION_REG	= 0x05

const INA219_RESET		= 0x8000

const INA219_BIT_MODE_9		= 0x0
const INA219_BIT_MODE_10	= 0x1
const INA219_BIT_MODE_11	= 0x2
const INA219_BIT_MODE_12	= 0x3
const INA219_SAMPLE_MODE_2	= 0x9
const INA219_SAMPLE_MODE_4	= 0xa
const INA219_SAMPLE_MODE_8	= 0xb
const INA219_SAMPLE_MODE_16	= 0xc
const INA219_SAMPLE_MODE_32	= 0xd
const INA219_SAMPLE_MODE_64	= 0xe
const INA219_SAMPLE_MODE_128	= 0xf

const INA219_MEASURE_MODE_PWR_DOWN		= 0x0
const INA219_MEASURE_MODE_SHUNT_TRIGGERED	= 0x1
const INA219_MEASURE_MODE_BUS_TRIGGERED		= 0x2
const INA219_MEASURE_MODE_BOTH_TRIGGERED	= 0x3
const INA219_MEASURE_MODE_ADC_OFF		= 0x4
const INA219_MEASURE_MODE_SHUNT_CONTINUOUS	= 0x5
const INA219_MEASURE_MODE_BUS_CONTINUOUS	= 0x6
const INA219_MEASURE_MODE_BOTH_CONTINUOUS	= 0x7

const INA219_POWER_GAIN_40	= 0x0
const INA219_POWER_GAIN_80	= 0x1
const INA219_POWER_GAIN_160	= 0x2
const INA219_POWER_GAIN_320	= 0x3 

const INA219_BUS_RANGE_16	= 0x0 
const INA219_BUS_RANGE_32	= 0x1

mutable struct INA219
  devId::Int
  address::Int
  mode::UInt8
  busMode::UInt8
  shuntMode::UInt8
  gain::UInt8
  range::UInt8
  calibration::UInt16
  currentFactor::Float16
end
